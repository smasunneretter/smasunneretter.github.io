<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Små sunne retter</title>
    <style media="screen">
      body{
        background-color: #336f25;
        background-position: fixed;
      }
      .innpakning{
        margin-left: 10%;
        width: 75%;
        padding: 2.5%;
      }
      h1{
        border: 5px solid #b1b3b0;
        background-color: #336f25;
        display: inline-block;
        margin-left: 5%;
        width: 85%;
        padding: 2.5%;
        margin-top: 0%;
        text-align: center;
        font-family: verdana;
        font-size: 350%;
        color: #31a331;
      }
      #logo{
        border: 5px solid #b1b3b0;
        background-color: #b1b3b0;
        background-image: url(media/logo.png);
        background-size: 100%;
        background-repeat: no-repeat;
        width: 20%;
        height: 200px;
        color: #31a331;
      }
      .info{
        border: 5px solid #b1b3b0;
        background-color: #336f25;
        margin-left: 5%;
        width: 85%;
        margin-top: 2.5%;
        padding: 2.5%;
        text-align: left;
        font-family: verdana;
        font-size: 120%;
        color: #101010;
      }
      .underoverskrifter{
        text-align: left;
        font-family: verdana;
        font-size: 200%;
        color: #31a331;
      }
      button{
        margin-left: 10px;
        padding: 10px;
        color: #ffffff;
        text-shadow: 0 -1px -1px #335166;
        border: 1px solid #a2a2a2;
        border-radius: 4px;
        background: linear-gradient(rgba(255, 255, 255, 0.2), transparent);
        box-shadow: 0 1px 5px rgba(0, 0, 0, 0.7);
        outline: none;
        cursor: pointer;
        background-color: #31a331;
      }
      button:active{
        transform: translate(2px, 2px);
      }
      .fjernMatvareKnapp{
        background-color: #ef0000;
      }
      .forslagPaRett{
        border: 5px solid #b1b3b0;
        background-color: #b1b3b0;
        margin-left: 5%;
        width: 85%;
        margin-top: 2.5%;
        padding: 2.5%;
        text-align: left;
        font-family: verdana;
        font-size: 120%;
        color: #101010;
      }
      .overskriftRett{
        margin-top: 0%;
        margin-bottom: 0%;
        text-align: center;
        font-family: verdana;
        font-size: 200%;
        color: #31a331;
      }
    </style>
  </head>
  <body>
    <div class="innpakning">
      <h1>SMÅ SUNNE RETTER</h1>
      <!-- <div id="logo"></div> -->

      <div class="info">
        <p>
          Hei og velkommen til små sunne retter!
          Dette er en nettside utviklet for deg som lurer på hva slags sunn og god mat du kan lage deg med de matvarene du for øyeblikket har tilgjengelig.
          Nedenfor finner du et felt, "Legg til tilgjengelige matvarer", der du kan legge inn de produktene du har tilgjengelig for øyeblikket, og de vil dukke opp under ved "Dine matvarer".
        </p>
        <p class="underoverskrifter">Legg til tilgjengelige matvarer:</p>
        <p id="leggTilMatvarer">
          <input list="muligeMatvarer">
          <datalist id="muligeMatvarer"></datalist>
          <button id="leggTilMatvareKnapp">Legg til matvare</button>
        </p>

        <div id="dineMatvarer"></div>

      </div>
    </div>

    <script type="text/javascript">
      var matvarer = ["Egg", "Pasta", "Kylling", "Bacon", "Løk", "Margarin", "Nudler", "Skinke", "Grønnsaker"];
      matvarer.sort();

      var tilgjengeligeMatvarer = [];

      var infoEl = document.querySelector(".info");
      var inputEl = document.querySelector("input");
      var muligeMatvarerEl = document.querySelector("#muligeMatvarer");
      var dineMatvarerEl = document.querySelector("#dineMatvarer");

      for (var i = 0; i < matvarer.length; i++) {
        var valgMatvare = document.createElement("option");
        valgMatvare.value = matvarer[i];
        muligeMatvarerEl.appendChild(valgMatvare);
      }

      var leggTilMatvareKnappEl = document.querySelector("#leggTilMatvareKnapp");
      leggTilMatvareKnappEl.addEventListener("click", leggMatvareTilListe);

      function leggMatvareTilListe() {
        var riktig = "feil";
        var korrekt = 0;
        for (var i = 0; i < matvarer.length; i++) {
          if (inputEl.value === matvarer[i]) {
            korrekt++;
            if (tilgjengeligeMatvarer.length > 0) {
              var test = 0;
              for (var j = 0; j < tilgjengeligeMatvarer.length; j++) {
                if (inputEl.value != tilgjengeligeMatvarer[j]) {
                  test++;
                }
              }
              if (test === tilgjengeligeMatvarer.length) {
                tilgjengeligeMatvarer.push(inputEl.value);
                riktig = "rett";
              }
              else {
                alert("Det er ikke nødvendig å legge inn samme matvare flere ganger!");
              }

            }
            else {
              tilgjengeligeMatvarer.push(inputEl.value);
              riktig = "rett";
            }
          }
        }
        if (inputEl.value === "") {
          korrekt++;
          alert("Du må legge inn noe!");
        }
        if (korrekt === 0) {
          alert("Du må legge inn en matvare som eksisterer i programmet!");
        }

        inputEl.value = "";

        if (riktig === "rett") {
          dineMatvarerEl.innerHTML = "<p class='underoverskrifter'>Dine matvarer:</p>";
          for (var i = 0; i < tilgjengeligeMatvarer.length; i++) {
            var nyMatvare = document.createElement("p");
            nyMatvare.innerHTML = tilgjengeligeMatvarer[i];
            var fjernMatvareKnappEl = document.createElement("button");
            fjernMatvareKnappEl.setAttribute("class", "fjernMatvareKnapp");
            fjernMatvareKnappEl.setAttribute("id", tilgjengeligeMatvarer[i]);
            fjernMatvareKnappEl.innerHTML = "X";
            fjernMatvareKnappEl.addEventListener("click", fjernMatvarerFraListe);
            nyMatvare.appendChild(fjernMatvareKnappEl);
            dineMatvarerEl.appendChild(nyMatvare);
          }
          var mellomRomTilKnapp = document.createElement("p");
          dineMatvarerEl.appendChild(mellomRomTilKnapp);
          var finnRetterKnappEl = document.createElement("button");
          finnRetterKnappEl.innerHTML = "Finn retter";
          finnRetterKnappEl.addEventListener("click", finnRett);
          dineMatvarerEl.appendChild(finnRetterKnappEl);
        }
      }

      function fjernMatvarerFraListe(e) {
        for (var i = 0; i < tilgjengeligeMatvarer.length; i++) {
          if (e.target.id === tilgjengeligeMatvarer[i]) {
            tilgjengeligeMatvarer.splice(i, 1);
          }
        }
        dineMatvarerEl.innerHTML = "<p class='underoverskrifter'>Dine matvarer:</p>";
        for (var i = 0; i < tilgjengeligeMatvarer.length; i++) {
          var nyMatvare = document.createElement("p");
          nyMatvare.innerHTML = tilgjengeligeMatvarer[i];
          var fjernMatvareKnappEl = document.createElement("button");
          fjernMatvareKnappEl.setAttribute("class", "fjernMatvareKnapp");
          fjernMatvareKnappEl.setAttribute("id", tilgjengeligeMatvarer[i]);
          fjernMatvareKnappEl.innerHTML = "X";
          fjernMatvareKnappEl.addEventListener("click", fjernMatvarerFraListe);
          nyMatvare.appendChild(fjernMatvareKnappEl);
          dineMatvarerEl.appendChild(nyMatvare);
        }
        var mellomRomTilKnapp = document.createElement("p");
        dineMatvarerEl.appendChild(mellomRomTilKnapp);
        var finnRetterKnappEl = document.createElement("button");
        finnRetterKnappEl.innerHTML = "Finn retter";
        finnRetterKnappEl.addEventListener("click", finnRett);
        dineMatvarerEl.appendChild(finnRetterKnappEl);
      }

      var programmetsRetter = [
        {
          navnPaRett: "Eggerøre",
          ingredienser: ["Egg"],
          oppskrift: "<ol> <li>Knekk egg opp i en gryte, og varm opp på medium varme mens du rører rundt med en slikkepott.</li><li>Rør hele tiden. Steker eggene for fort, så skru ned varmen på plata. Det hele skal ta 2-3 minutter.</li><li>Når eggerøren tykner, tas kjelen av varmen. Du kan gjerne blande inn hakket gressløk til slutt hvis du har det tilgjengelig. Serveres gjerne på brødskive, men smaker også godt rett fra pannen.</li></ol>"
        },
        {
          navnPaRett: "Omelett",
          ingredienser: ["Egg", "Margarin", "Løk"],
          oppskrift: "<ol><li>Visp sammen egg (2 stk) og vann (2 ss).</li><li>Smelt 1 ss margarin på stekeplaten, margarinen skal frese når den slippes i. Hell i røren og trekk den inn mot midten av platen etter hvert som røren stivner.</li><li>Legg den finhakkede løken (mengde løk avhenger av hva en selv ønsker) på den ene halvparten når røren nesten er stivnet.</li><li>La så omeletten steke noen sekunder før den andre halvparten brettes over, så er det bare å hive innpå.</li></ol>"
        },
        {
          navnPaRett: "Stekte nudler",
          ingredienser: ["Egg", "Margarin", "Grønnsaker", "Skinke", "Nudler"],
          oppskrift: "<ol><li>Kok opp nudlene (Mengden velger du selv).</li><li>Stek 200-300 g oppskåret skinke i en middels mengde margarin.</li><li>Ha i utvalgte oppskårede grønnsaker og stek så videre i noen minutter. Husk å vende blandingen underveis.</li><li>Rør så inn de ferdig kokte nudlene.</li><li>Lag et hull i midten av panna og knekk 2 egg oppi. Rør rundt til eggene ser ut som ferdig eggerøre. Vend det så inn i nudelblandingen. Velbekomme!</li></ol>"
        }
      ];

      function finnRett() {
        infoEl.innerHTML = "<p class='underoverskrifter'>Forslag til retter:</p>";
        var forslagPaRettNr = 0;
        for (var i = 0; i < programmetsRetter.length; i++) {
          var antallKorrekteMatvarer = 0;
          for (var j = 0; j < programmetsRetter[i].ingredienser.length; j++) {
            for (var k = 0; k < tilgjengeligeMatvarer.length; k++) {
              if (tilgjengeligeMatvarer[k] === programmetsRetter[i].ingredienser[j]) {
                antallKorrekteMatvarer++;
              }
            }
          }
          if (antallKorrekteMatvarer === programmetsRetter[i].ingredienser.length) {
            forslagPaRettNr++;

            var nyDiv = document.createElement("div");
            nyDiv.className = "forslagPaRett";
            var overskriftRettEl = document.createElement("p");
            overskriftRettEl.className = "overskriftRett";
            overskriftRettEl.innerHTML = programmetsRetter[i].navnPaRett + " på 123";
            nyDiv.appendChild(overskriftRettEl);
            nyDiv.innerHTML += "<ul>";
            for (var j = 0; j < programmetsRetter[i].ingredienser.length; j++) {
              nyDiv.innerHTML += "<li>" + programmetsRetter[i].ingredienser[j] + "</li>";
            }
            nyDiv.innerHTML += "</ul>";
            nyDiv.innerHTML += programmetsRetter[i].oppskrift;
            infoEl.appendChild(nyDiv);
          }
        }
        if (forslagPaRettNr === 0) {
          infoEl.innerHTML = "<p class='underoverskrifter'>Det finnes dessverre ingen oppskrifter med de matvarene du har lagt inn. </p>";
        }
      }
    </script>
  </body>
</html>
